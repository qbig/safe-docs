
import Method from './Method'

# Safe Transaction Service API Reference  

  API to keep track of transactions sent via Safe smart contracts
    
  ## About

  ### /v1/about/
  <Method method="get" /> 
  


Returns information and configuration of the service



##### Responses

**200** - 

### /v1/about/ethereum-rpc/
  <Method method="get" /> 
  


Get information about the Ethereum RPC node used by the service



##### Responses

**200** - 

### /v1/about/ethereum-tracing-rpc/
  <Method method="get" /> 
  


Get information about the Ethereum Tracing RPC node used by the service (if any configured)



##### Responses

**200** - 

### /v1/about/indexing/
  <Method method="get" /> 
  


Get current indexing status for ERC20/721 events



##### Responses

**200** - 

### /v1/about/master-copies/
  <Method method="get" /> 
  


Use `singletons` instead of `master-copies`



##### Responses

**200** - Ok

### /v1/about/singletons/
  <Method method="get" /> 
  






##### Responses

**200** - 

## Contracts

  ### /v1/contracts/
  <Method method="get" /> 
  




##### Parameters
**ordering** - Which field to use when ordering the results.
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 

### /v1/contracts/\{address\}/
  <Method method="get" /> 
  






##### Responses

**200** - 

## Data-decoder

  ### /v1/data-decoder/
  <Method method="post" /> 
  


Returns decoded information using tx service internal ABI information given the tx
data as a `0x` prefixed hexadecimal string.
If address of the receiving contract is provided decoded data will be more accurate,
as in case of ABI collision service will know which ABI to use.

##### Parameters
**data** - undefined

##### Responses

**200** - Decoded data
**404** - Cannot find function selector to decode data
**422** - Invalid data

## Delegates

  ### /v1/delegates/
  <Method method="get" /> 
  


Get list of delegates

##### Parameters
**safe** - safe
**delegate** - delegate
**delegator** - delegator
**label** - label
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 
**400** - Invalid data

### /v1/delegates/
  <Method method="post" /> 
  


Create a delegate for a Safe address with a custom label. Calls with same delegate but different label or
signer will update the label or delegator if different.
For the signature we are using TOTP with `T0=0` and `Tx=3600`. TOTP is calculated by taking the
Unix UTC epoch time (no milliseconds) and dividing by 3600 (natural division, no decimals)
For signature this hash need to be signed: keccak(checksummed address + str(int(current_epoch // 3600)))
For example:
     - We want to add the delegate `0x132512f995866CcE1b0092384A6118EDaF4508Ff` and `epoch=1586779140`.
     - `TOTP = epoch // 3600 = 1586779140 // 3600 = 440771`
     - The hash to sign by a Safe owner would be `keccak("0x132512f995866CcE1b0092384A6118EDaF4508Ff440771")`

##### Parameters
**data** - undefined

##### Responses

**202** - Accepted
**400** - Malformed data

### /v1/delegates/\{delegate_address\}/
  <Method method="delete" /> 
  


Delete every pair delegate/delegator found. Signature is built the same way as for adding a delegate,
but in this case the signer can be either the `delegator` (owner) or the `delegate` itself.
Check `POST /delegates/`

##### Parameters
**data** - undefined

##### Responses

**204** - Deleted
**400** - Malformed data
**404** - Delegate not found
**422** - Invalid Ethereum address/Error processing data

### /v1/safes/\{address\}/delegates/\{delegate_address\}/
  <Method method="delete" /> 
  


Delete a delegate for a Safe. Signature is built the same way that for adding a delegate.
Check `POST /delegates/`

##### Parameters
**data** - undefined

##### Responses

**204** - Deleted
**400** - Malformed data
**404** - Delegate not found
**422** - Invalid Ethereum address/Error processing data

## Messages

  ### /v1/messages/\{message_hash\}/
  <Method method="get" /> 
  






##### Responses

**200** - 

### /v1/messages/\{message_hash\}/signatures/
  <Method method="post" /> 
  




##### Parameters
**data** - undefined

##### Responses

**201** - Created

## Module-transaction

  ### /v1/module-transaction/\{module_transaction_id\}
  <Method method="get" /> 
  


:return: module transaction filtered by module_transaction_id



##### Responses

**200** - 
**400** - Invalid moduleTransactionId
**404** - ModuleTransaction does not exist

## Modules

  ### /v1/modules/\{address\}/safes/
  <Method method="get" /> 
  


Return Safes where the module address provided is enabled



##### Responses

**200** - 
**422** - Module address checksum not valid

## Multisig-transactions

  ### /v1/multisig-transactions/\{safe_tx_hash\}/
  <Method method="get" /> 
  






##### Responses

**200** - 

### /v1/multisig-transactions/\{safe_tx_hash\}/
  <Method method="delete" /> 
  


Delete a queued but not executed multisig transaction. Only the proposer can delete the transaction.
Delegates are not valid, if the transaction was proposed by a delegator the owner who delegated to
the delegate must be used.
An EOA is required to sign the following EIP712 data:

```python
 \{
    "types": \{
        "EIP712Domain": [
            \{"name": "name", "type": "string"\},
            \{"name": "version", "type": "string"\},
            \{"name": "chainId", "type": "uint256"\},
            \{"name": "verifyingContract", "type": "address"\},
        ],
        "DeleteRequest": [
            \{"name": "safeTxHash", "type": "bytes32"\},
            \{"name": "totp", "type": "uint256"\},
        ],
    \},
    "primaryType": "DeleteRequest",
    "domain": \{
        "name": "Safe Transaction Service",
        "version": "1.0",
        "chainId": chain_id,
        "verifyingContract": safe_address,
    \},
    "message": \{
        "safeTxHash": safe_tx_hash,
        "totp": totp,
    \},
\}
```

`totp` parameter is calculated with `T0=0` and `Tx=3600`. `totp` is calculated by taking the
Unix UTC epoch time (no milliseconds) and dividing by 3600 (natural division, no decimals)

##### Parameters
**data** - undefined

##### Responses

**204** - Deleted
**400** - Error processing data
**404** - Transaction not found

### /v1/multisig-transactions/\{safe_tx_hash\}/confirmations/
  <Method method="get" /> 
  


Get the list of confirmations for a multisig transaction

##### Parameters
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 
**400** - Invalid data

### /v1/multisig-transactions/\{safe_tx_hash\}/confirmations/
  <Method method="post" /> 
  


Add a confirmation for a transaction. More than one signature can be used. This endpoint does not support
the use of delegates to make a transaction trusted.

##### Parameters
**data** - undefined

##### Responses

**201** - Created
**400** - Malformed data
**422** - Error processing data

## Notifications

  ### /v1/notifications/devices/
  <Method method="post" /> 
  


Creates a new FirebaseDevice. If uuid is not provided a new device will be created.
If a uuid for an existing Safe is provided the FirebaseDevice will be updated with all the new data provided.
Safes provided on the request are always added and never removed/replaced
Signature must sign `keccack256('gnosis-safe\{timestamp-epoch\}\{uuid\}\{cloud_messaging_token\}\{safes_sorted\}':
    - `\{timestamp-epoch\}` must be an integer (no milliseconds)
    - `\{safes_sorted\}` must be checksummed safe addresses sorted and joined with no spaces

##### Parameters
**data** - undefined

##### Responses

**200** - 
**400** - Invalid data

### /v1/notifications/devices/\{uuid\}/
  <Method method="delete" /> 
  


Remove a FirebaseDevice



##### Responses

**204** - 

### /v1/notifications/devices/\{uuid\}/safes/\{address\}/
  <Method method="delete" /> 
  


Remove a Safe for a FirebaseDevice



##### Responses

**204** - 

## Owners

  ### /v1/owners/\{address\}/safes/
  <Method method="get" /> 
  


Return Safes where the address provided is an owner



##### Responses

**200** - 
**422** - Owner address checksum not valid

## Safes

  ### /v1/notifications/devices/\{uuid\}/safes/\{address\}/
  <Method method="delete" /> 
  


Remove a Safe for a FirebaseDevice



##### Responses

**204** - 

### /v1/safes/\{address\}/
  <Method method="get" /> 
  


Get status of the safe



##### Responses

**200** - 
**404** - Safe not found
**422** - code = 1: Checksum address validation failed
code = 50: Cannot get Safe info

### /v1/safes/\{address\}/all-transactions/
  <Method method="get" /> 
  




##### Parameters
**ordering** - Which field to use when ordering the results.
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.
**executed** - If `True` only executed transactions are returned
**queued** - If `True` transactions with `nonce >= Safe current nonce` are also returned
**trusted** - If `True` just trusted transactions are shown (indexed, added by a delegate or with at least one confirmation)

##### Responses

**200** - A list with every element with the structure of one of these transactiontypes
**422** - code = 1: Checksum address validation failed

### /v1/safes/\{address\}/balances/
  <Method method="get" /> 
  


Get balance for Ether and ERC20 tokens

##### Parameters
**trusted** - If `True` just trusted tokens will be returned
**exclude_spam** - If `True` spam tokens will not be returned

##### Responses

**200** - 
**404** - Safe not found
**422** - Safe address checksum not valid

### /v1/safes/\{address\}/balances/usd/
  <Method method="get" /> 
  


Get balance for Ether and ERC20 tokens with USD fiat conversion

##### Parameters
**trusted** - If `True` just trusted tokens will be returned
**exclude_spam** - If `True` spam tokens will not be returned

##### Responses

**200** - 
**404** - Safe not found
**422** - Safe address checksum not valid

### /v1/safes/\{address\}/creation/
  <Method method="get" /> 
  


Get status of the safe



##### Responses

**200** - 
**404** - Safe creation not found
**422** - Owner address checksum not valid
**503** - Problem connecting to Ethereum network

### /v1/safes/\{address\}/delegates/\{delegate_address\}/
  <Method method="delete" /> 
  


Delete a delegate for a Safe. Signature is built the same way that for adding a delegate.
Check `POST /delegates/`

##### Parameters
**data** - undefined

##### Responses

**204** - Deleted
**400** - Malformed data
**404** - Delegate not found
**422** - Invalid Ethereum address/Error processing data

### /v1/safes/\{address\}/incoming-transfers/
  <Method method="get" /> 
  




##### Parameters
**_from** - _from
**block_number** - block_number
**block_number__gt** - block_number__gt
**block_number__lt** - block_number__lt
**execution_date__gte** - execution_date__gte
**execution_date__lte** - execution_date__lte
**execution_date__gt** - execution_date__gt
**execution_date__lt** - execution_date__lt
**to** - to
**token_address** - token_address
**transaction_hash** - transaction_hash
**value** - value
**value__gt** - value__gt
**value__lt** - value__lt
**erc20** - erc20
**erc721** - erc721
**ether** - ether
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 
**422** - Safe address checksum not valid

### /v1/safes/\{address\}/messages/
  <Method method="get" /> 
  




##### Parameters
**ordering** - Which field to use when ordering the results.
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 

### /v1/safes/\{address\}/messages/
  <Method method="post" /> 
  


Create a new signed message for a Safe. Message can be:
- A ``string``, so ``EIP191`` will be used to get the hash.
- An ``EIP712`` ``object``.

Hash will be calculated from the provided ``message``. Sending a raw ``hash`` will not be accepted,
service needs to derive it itself.

##### Parameters
**data** - undefined

##### Responses

**201** - Created

### /v1/safes/\{address\}/module-transactions/
  <Method method="get" /> 
  


Returns the module transaction of a Safe

##### Parameters
**safe** - safe
**module** - module
**to** - to
**operation** - operation
**failed** - failed
**block_number** - block_number
**block_number__gt** - block_number__gt
**block_number__lt** - block_number__lt
**transaction_hash** - transaction_hash
**ordering** - Which field to use when ordering the results.
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 
**400** - Invalid data
**422** - Invalid ethereum address

### /v1/safes/\{address\}/multisig-transactions/
  <Method method="get" /> 
  


Returns a paginated list of Multisig Transactions for a Safe.
By default only ``trusted`` multisig transactions are returned.

##### Parameters
**failed** - failed
**modified__lt** - modified__lt
**modified__gt** - modified__gt
**modified__lte** - modified__lte
**modified__gte** - modified__gte
**nonce__lt** - nonce__lt
**nonce__gt** - nonce__gt
**nonce__lte** - nonce__lte
**nonce__gte** - nonce__gte
**nonce** - nonce
**safe_tx_hash** - safe_tx_hash
**to** - to
**value__lt** - value__lt
**value__gt** - value__gt
**value** - value
**executed** - executed
**has_confirmations** - has_confirmations
**trusted** - trusted
**execution_date__gte** - execution_date__gte
**execution_date__lte** - execution_date__lte
**submission_date__gte** - submission_date__gte
**submission_date__lte** - submission_date__lte
**transaction_hash** - transaction_hash
**ordering** - Which field to use when ordering the results.
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 
**400** - Invalid data
**422** - Invalid ethereum address

### /v1/safes/\{address\}/multisig-transactions/
  <Method method="post" /> 
  


Creates a Multisig Transaction with its confirmations and retrieves all the information related.

##### Parameters
**data** - undefined

##### Responses

**201** - Created or signature updated
**400** - Invalid data
**422** - Invalid ethereum address/User is not an owner/Invalid safeTxHash/Invalid signature/Nonce already executed/Sender is not an owner

### /v1/safes/\{address\}/multisig-transactions/estimations/
  <Method method="post" /> 
  


Estimates `safeTxGas` for a Safe Multisig Transaction.

##### Parameters
**data** - undefined

##### Responses

**200** - 
**400** - Data not valid
**404** - Safe not found
**422** - Tx not valid

### /v1/safes/\{address\}/transactions/
  <Method method="get" /> 
  


Use `multisig-transactions` instead of `transactions`

##### Parameters
**failed** - failed
**modified__lt** - modified__lt
**modified__gt** - modified__gt
**modified__lte** - modified__lte
**modified__gte** - modified__gte
**nonce__lt** - nonce__lt
**nonce__gt** - nonce__gt
**nonce__lte** - nonce__lte
**nonce__gte** - nonce__gte
**nonce** - nonce
**safe_tx_hash** - safe_tx_hash
**to** - to
**value__lt** - value__lt
**value__gt** - value__gt
**value** - value
**executed** - executed
**has_confirmations** - has_confirmations
**trusted** - trusted
**execution_date__gte** - execution_date__gte
**execution_date__lte** - execution_date__lte
**submission_date__gte** - submission_date__gte
**submission_date__lte** - submission_date__lte
**transaction_hash** - transaction_hash
**ordering** - Which field to use when ordering the results.
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 

### /v1/safes/\{address\}/transactions/
  <Method method="post" /> 
  


Use `multisig-transactions` instead of `transactions`

##### Parameters
**data** - undefined

##### Responses

**201** - 

### /v1/safes/\{address\}/transfers/
  <Method method="get" /> 
  




##### Parameters
**_from** - _from
**block_number** - block_number
**block_number__gt** - block_number__gt
**block_number__lt** - block_number__lt
**execution_date__gte** - execution_date__gte
**execution_date__lte** - execution_date__lte
**execution_date__gt** - execution_date__gt
**execution_date__lt** - execution_date__lt
**to** - to
**token_address** - token_address
**transaction_hash** - transaction_hash
**value** - value
**value__gt** - value__gt
**value__lt** - value__lt
**erc20** - erc20
**erc721** - erc721
**ether** - ether
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 
**422** - Safe address checksum not valid

### /v2/safes/\{address\}/collectibles/
  <Method method="get" /> 
  


Get collectibles (ERC721 tokens) and information about them

##### Parameters
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.
**trusted** - If `True` just trusted tokens will be returned
**exclude_spam** - If `True` spam tokens will not be returned

##### Responses

**200** - 
**404** - Safe not found
**422** - Safe address checksum not valid

## Tokens

  ### /v1/tokens/
  <Method method="get" /> 
  




##### Parameters
**name** - name
**address** - address
**symbol** - symbol
**decimals__lt** - decimals__lt
**decimals__gt** - decimals__gt
**decimals** - decimals
**search** - A search term.
**ordering** - Which field to use when ordering the results.
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 

### /v1/tokens/\{address\}/
  <Method method="get" /> 
  






##### Responses

**200** - 

## Transactions

  ### /v1/multisig-transactions/\{safe_tx_hash\}/
  <Method method="get" /> 
  






##### Responses

**200** - 

### /v1/multisig-transactions/\{safe_tx_hash\}/
  <Method method="delete" /> 
  


Delete a queued but not executed multisig transaction. Only the proposer can delete the transaction.
Delegates are not valid, if the transaction was proposed by a delegator the owner who delegated to
the delegate must be used.
An EOA is required to sign the following EIP712 data:

```python
 \{
    "types": \{
        "EIP712Domain": [
            \{"name": "name", "type": "string"\},
            \{"name": "version", "type": "string"\},
            \{"name": "chainId", "type": "uint256"\},
            \{"name": "verifyingContract", "type": "address"\},
        ],
        "DeleteRequest": [
            \{"name": "safeTxHash", "type": "bytes32"\},
            \{"name": "totp", "type": "uint256"\},
        ],
    \},
    "primaryType": "DeleteRequest",
    "domain": \{
        "name": "Safe Transaction Service",
        "version": "1.0",
        "chainId": chain_id,
        "verifyingContract": safe_address,
    \},
    "message": \{
        "safeTxHash": safe_tx_hash,
        "totp": totp,
    \},
\}
```

`totp` parameter is calculated with `T0=0` and `Tx=3600`. `totp` is calculated by taking the
Unix UTC epoch time (no milliseconds) and dividing by 3600 (natural division, no decimals)

##### Parameters
**data** - undefined

##### Responses

**204** - Deleted
**400** - Error processing data
**404** - Transaction not found

### /v1/multisig-transactions/\{safe_tx_hash\}/confirmations/
  <Method method="get" /> 
  


Get the list of confirmations for a multisig transaction

##### Parameters
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.

##### Responses

**200** - 
**400** - Invalid data

### /v1/multisig-transactions/\{safe_tx_hash\}/confirmations/
  <Method method="post" /> 
  


Add a confirmation for a transaction. More than one signature can be used. This endpoint does not support
the use of delegates to make a transaction trusted.

##### Parameters
**data** - undefined

##### Responses

**201** - Created
**400** - Malformed data
**422** - Error processing data

### /v1/transactions/\{safe_tx_hash\}/
  <Method method="get" /> 
  


Use `multisig-transactions` instead of `transactions`



##### Responses

**200** - Ok
**404** - Not found

### /v1/transactions/\{safe_tx_hash\}/
  <Method method="delete" /> 
  


Delete a queued but not executed multisig transaction. Only the proposer can delete the transaction.
Delegates are not valid, if the transaction was proposed by a delegator the owner who delegated to
the delegate must be used.
An EOA is required to sign the following EIP712 data:

```python
 \{
    "types": \{
        "EIP712Domain": [
            \{"name": "name", "type": "string"\},
            \{"name": "version", "type": "string"\},
            \{"name": "chainId", "type": "uint256"\},
            \{"name": "verifyingContract", "type": "address"\},
        ],
        "DeleteRequest": [
            \{"name": "safeTxHash", "type": "bytes32"\},
            \{"name": "totp", "type": "uint256"\},
        ],
    \},
    "primaryType": "DeleteRequest",
    "domain": \{
        "name": "Safe Transaction Service",
        "version": "1.0",
        "chainId": chain_id,
        "verifyingContract": safe_address,
    \},
    "message": \{
        "safeTxHash": safe_tx_hash,
        "totp": totp,
    \},
\}
```

`totp` parameter is calculated with `T0=0` and `Tx=3600`. `totp` is calculated by taking the
Unix UTC epoch time (no milliseconds) and dividing by 3600 (natural division, no decimals)

##### Parameters
**data** - undefined

##### Responses

**204** - Deleted
**400** - Error processing data
**404** - Transaction not found

## Transfer

  ### /v1/transfer/\{transfer_id\}
  <Method method="get" /> 
  


:return: transfer filtered by transfer_id



##### Responses

**200** - 
**400** - Invalid transferId
**404** - Transfer does not exist

## Safes

  ### /v2/safes/\{address\}/collectibles/
  <Method method="get" /> 
  


Get collectibles (ERC721 tokens) and information about them

##### Parameters
**limit** - Number of results to return per page.
**offset** - The initial index from which to return the results.
**trusted** - If `True` just trusted tokens will be returned
**exclude_spam** - If `True` spam tokens will not be returned

##### Responses

**200** - 
**404** - Safe not found
**422** - Safe address checksum not valid

  